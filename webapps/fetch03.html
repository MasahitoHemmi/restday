<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="Cache-Control" content="no-cache">
<title>REST API test</title>
<link href="css/ress.min.css" rel="stylesheet" type="text/css">
<link href="css/css.css" rel="stylesheet" type="text/css">

<style>
section {margin:2em;padding:0;border:0}
li {margin:2em;padding:0;border:0}

fieldset{margin:2em;padding:0;border:0}

fieldset div {padding-top:10px;clear:both}
fieldset div label {display:block; clear:left; text-align:right; width:20em; float:left; padding-right:10px; line-height:27px; font-weight:bold; font-size:1em}
fieldset div input {width:5em; float:left; background-color: #fff3b8;  }

</style>

<!--  https://developer.mozilla.org/ja/docs/Web/API/Fetch_API/Using_Fetch    -->

<!--  https://sbfl.net/blog/2017/01/29/fetch-api/    -->

<!-- How to use fetch  -->


<script type="text/javascript">

var appc = "/restday/v1";


function OnGetClick() {

  var aa = document.getElementById("p0101").value;
  var bb = document.getElementById("p0102").value;
  
  var url = appc + '/users';
  var param = "";
  
  if (aa != "") {
    param = "from=" + aa;
  }
  
  if (bb != "") {
     if (param != "") {
       param = param + "&";
     }
     param = param + "to=" + bb;
  }
  
  if (param != "") {
     url = url + "?" + param;
  }

  console.log("url = " + url );


  fetch(url, {
    method: 'GET',
    headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
    }
  }).then((response) => {
    console.log("status=" + response.status);
    return response.text();
  })
  .then((text) => console.log(text))
  .catch((error) => console.log(error));
}


</script>


</head>

<body>
<header>
    <h1>fetch03.html (user) </h1>
</header>

<nav id="nav">
  <ul>
    <li style="color:white"><a href="index.html">INDEX</a></li>
  </ul>
</nav>


<fieldset>
  <div><label for="p0101">from date</label>
      <input id="p0101" type="text" name="p0101" value=""  tabindex="1">
  </div>
  <div><label for="p0102">to date</label>
      <input id="p0102" type="text" name="p0102" value=""  tabindex="1">
  </div>
  <button value="POST"  class="ButtonStyle"  onclick="OnGetClick();" >Get(Select) </button>
</fieldset>


</body>
</html>
