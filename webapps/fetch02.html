<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="Cache-Control" content="no-cache">
<title>REST API test</title>
<link href="css/ress.min.css" rel="stylesheet" type="text/css">
<link href="css/css.css" rel="stylesheet" type="text/css">

<style>
section {margin:2em;padding:0;border:0}
li {margin:2em;padding:0;border:0}

</style>

<!--  https://developer.mozilla.org/ja/docs/Web/API/Fetch_API/Using_Fetch    -->

<!--  https://sbfl.net/blog/2017/01/29/fetch-api/    -->

<!-- How to use fetch  -->


<script type="text/javascript">

var appc = "/restday/v1";

function OnGet2Click() {
  
  fetch(appc + '/twokey/11/22')
  .then((response) => {
     console.log("status=" + response.status);
     return response.text();
  })
  .then((text) => console.log(text))
  .catch((error) => console.log(error));
  
}

function OnPost2Click() {

  var data = {'company': 11, 'sqno': 56, 'aa': 35, 'bb': 'aiueo', 'tt': '2019-12-30'  };
  fetch(appc + '/twokey', {
    method: 'POST',
    headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  }).then((response) => {
     console.log("status=" + response.status);
     return response.text();
  })
  .then((text) => console.log(text))
  .catch((error) => console.log(error));
}

function OnPost3Click() {

  var data = {'company': 22, 'sqno': 56, 'aa': 35, 'bb': 'あいうえお', 'tt': '2019-12-30'  };
  fetch(appc + '/twokey', {
    method: 'POST',
    headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  }).then((response) => {
     console.log("status=" + response.status);
     return response.text();
  })
  .then((text) => console.log(text))
  .catch((error) => console.log(error)); 
}

//update
function OnPut2Click() {
  
  var data = { 'aa': 35, 'bb': 'wawonn', 'tt': '2019-12-30'  };
  fetch(appc + '/twokey/11/22', {
    method: 'PUT',
    headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  }).then((response) => {
     console.log("status=" + response.status);
     return response.text();
  })
  .then((text) => console.log(text))
  .catch((error) => console.log(error)); 

}



function OnDeleteClick() {
//  alert("delete");
  
  fetch(appc + '/twokey/22/56', {
    method: 'DELETE',
    headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
    }
  }).then((response) => {
     console.log("status=" + response.status);
     return response.text();
  })
  .then((text) => console.log(text))
  .catch((error) => console.log(error));

}
</script>


</head>

<body>
<header>
    <h1>fetch02.html (twokey) </h1>
</header>

<nav id="nav">
  <ul>
    <li style="color:white"><a href="index.html">INDEX</a></li>
  </ul>
</nav>

<br/>
<button value="POST"  class="ButtonStyle"  onclick="OnPost2Click();" >POST2 as Insert(11, 56)</button>
<br/>
<div> </div>
<br/>

<br/>
<button value="POST"  class="ButtonStyle"  onclick="OnPost3Click();" >POST3 as Insert(KANJI)(22, 56)</button>
<br/>
<div> </div>
<br/>


<button value="PUT"  class="ButtonStyle"  onclick="OnPut2Click();" >PUT2 as Update (11, 22)</button>
<br/>
<div> </div>
<br/>

<button value="GET"  class="ButtonStyle"  onclick="OnGet2Click();" >GET2 as Select (11, 22)</button>
<br/>
<div> </div>
<br/>



<button value="DELETE"  class="ButtonStyle"  onclick="OnDeleteClick();" >DELETE(22, 56)</button>
<br/>
<div> </div>
<br/>





</body>
</html>